<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualisasi Data - BPS Provinsi Nusa Tenggara Timur</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: #333;
            background: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #002855 0%, #003D7A 100%);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 8px;
        }

        .header-text h1 {
            color: white;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .header-text p {
            color: #B0C4DE;
            font-size: 13px;
            font-weight: 400;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-menu a:hover {
            color: #4FC3F7;
        }

        .nav-menu a.active {
            color: #FF9800;
        }

        .breadcrumb {
            background: #f8f9fa;
            padding: 15px 40px;
            border-bottom: 1px solid #e9ecef;
        }

        .breadcrumb a {
            color: #4FC3F7;
            text-decoration: none;
            font-size: 14px;
        }

        .breadcrumb span {
            color: #666;
            margin: 0 8px;
        }

        .main-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            padding: 30px 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .sidebar {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .filter-section {
            margin-bottom: 30px;
        }

        .filter-section h3 {
            color: #003D7A;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-group label {
            display: block;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #003D7A;
        }

        .checkbox-item label {
            font-size: 13px;
            color: #666;
            margin: 0;
            cursor: pointer;
        }

        .year-checkboxes {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .year-checkboxes .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .download-btn {
            width: 100%;
            padding: 12px;
            background: #003D7A;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background 0.3s;
            margin-bottom: 20px;
        }

        .download-btn:hover {
            background: #002855;
        }

        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .chart-title {
            color: #003D7A;
            font-size: 20px;
            font-weight: 700;
        }

        .chart-date {
            color: #666;
            font-size: 14px;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .chart-placeholder {
            color: #999;
            font-size: 16px;
            text-align: center;
        }

        .chart-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .chart-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: background 0.3s;
        }

        .chart-dot.active {
            background: #003D7A;
        }

        .chart-dot:hover {
            background: #0056b3;
        }

        .footer {
            background: linear-gradient(135deg, #001933 0%, #002855 100%);
            color: white;
            padding: 50px 40px 30px;
            margin-top: 50px;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 50px;
            margin-bottom: 40px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .footer-logo-img {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 8px;
        }

        .footer h3 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .footer p, .footer a {
            color: #B0C4DE;
            font-size: 14px;
            line-height: 1.8;
            text-decoration: none;
            display: block;
            margin-bottom: 8px;
        }

        .footer a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .social-links a:hover {
            background: #003D7A;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 25px;
            text-align: center;
        }

        .footer-bottom p {
            color: #B0C4DE;
            font-size: 13px;
            margin: 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }

            .sidebar {
                order: 2;
            }

            .chart-container {
                order: 1;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }

            .nav-menu {
                display: none;
            }

            .breadcrumb {
                padding: 15px 20px;
            }

            .main-container {
                padding: 15px;
                gap: 20px;
            }

            .chart-container {
                padding: 20px;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        /* Chart Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chart-container {
            animation: fadeIn 0.5s ease-out;
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="logo"></div>
            <div class="header-text">
                <h1>BADAN PUSAT STATISTIK</h1>
                <p>PROVINSI NUSA TENGGARA TIMUR</p>
            </div>
        </div>
        <nav class="nav-menu">
            <a href="beranda.html">Beranda</a>
            <a href="feedback.html">Feedback</a>
            <a href="metadata.html">Metadata</a>
            <a href="tentang.html">Tentang Kami</a>
            <a href="masuk.html">Masuk</a>
        </nav>
    </header>

    <div class="breadcrumb">
        <a href="beranda.html">Beranda</a>
        <span>›</span>
        <span>Visualisasi Data Inflasi</span>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <div class="filter-section">
                <h3>Tahun</h3>
                <div class="year-checkboxes">
                    <div class="checkbox-item">
                        <input type="checkbox" id="year2020" value="2020">
                        <label for="year2020">2020</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="year2021" value="2021">
                        <label for="year2021">2021</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="year2022" value="2022">
                        <label for="year2022">2022</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="year2023" value="2023">
                        <label for="year2023">2023</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="year2024" value="2024">
                        <label for="year2024">2024</label>
                    </div>
                </div>
            </div>

            <button class="download-btn" onclick="downloadData()">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"/>
                </svg>
                Unduh Data
            </button>

            <div class="filter-section">
                <h3>Wilayah</h3>
                <div class="checkbox-grid">
                    <div class="checkbox-item">
                        <input type="checkbox" id="malaka" value="malaka">
                        <label for="malaka">Kabupaten Malaka</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="kupang" value="kupang">
                        <label for="kupang">Kabupaten Kupang</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="manggarai-timur" value="manggarai-timur">
                        <label for="manggarai-timur">Kabupaten Manggarai Timur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="sumba-tengah" value="sumba-tengah">
                        <label for="sumba-tengah">Kabupaten Sumba Tengah</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="kota-kupang" value="kota-kupang">
                        <label for="kota-kupang">Kota Kupang</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="sumba-timur" value="sumba-timur">
                        <label for="sumba-timur">Kabupaten Sumba Timur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="alor" value="alor">
                        <label for="alor">Kabupaten Alor</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="belu" value="belu">
                        <label for="belu">Kabupaten Belu</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ende" value="ende">
                        <label for="ende">Kabupaten Ende</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="flores-timur" value="flores-timur">
                        <label for="flores-timur">Kabupaten Flores Timur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="kupang-kota" value="kupang-kota">
                        <label for="kupang-kota">Kota Kupang</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="lembata" value="lembata">
                        <label for="lembata">Kabupaten Lembata</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="manggarai" value="manggarai">
                        <label for="manggarai">Kabupaten Manggarai</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="manggarai-barat" value="manggarai-barat">
                        <label for="manggarai-barat">Kabupaten Manggarai Barat</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="ngada" value="ngada">
                        <label for="ngada">Kabupaten Ngada</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nagekeo" value="nagekeo">
                        <label for="nagekeo">Kabupaten Nagekeo</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="rote-ndao" value="rote-ndao">
                        <label for="rote-ndao">Kabupaten Rote Ndao</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="sabu-raijua" value="sabu-raijua">
                        <label for="sabu-raijua">Kabupaten Sabu Raijua</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="sikka" value="sikka">
                        <label for="sikka">Kabupaten Sikka</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="sumba-barat" value="sumba-barat">
                        <label for="sumba-barat">Kabupaten Sumba Barat</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-header">
                <h2 class="chart-title">Chart title goes here</h2>
                <span class="chart-date">15 April - 21 April</span>
            </div>
            
            <div class="chart-wrapper" id="chartWrapper">
                <div class="chart-placeholder" id="chartPlaceholder">
                    Bar Chart - Inflasi Data
                </div>
                <div class="tooltip" id="tooltip"></div>
            </div>
            
            <div class="chart-controls">
                <span class="chart-dot active" data-chart="bar"></span>
                <span class="chart-dot" data-chart="line"></span>
                <span class="chart-dot" data-chart="pie"></span>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div>
                <div class="footer-logo">
                    <div class="footer-logo-img"></div>
                    <h3>BADAN PUSAT STATISTIK</h3>
                </div>
                <p>Badan Pusat Statistik Provinsi Nusa Tenggara Timur<br>
                (Statistics of Nusa Tenggara Timur Province)</p>
                <p>Jl. R. Suprapto No. 5 Kupang - 85111</p>
                <p>Telp (0380) 826289; 821755; Faks (0380) 833124</p>
                <p>Mailbox : pst5300@bps[dot]go[dot]id<br>
                bps5300@bps[dot]go[dot]id</p>
                <div class="social-links">
                    <a href="#">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073z"/>
                        </svg>
                    </a>
                    <a href="#">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                        </svg>
                    </a>
                    <a href="#">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                    </a>
                </div>
            </div>
            <div>
                <p style="margin-top: 60px;">© Metadata Statistik 2025</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>Hak Cipta © 2023 Badan Pusat Statistik</p>
        </div>
    </footer>

    <script>
        // Sample data for visualization
        const chartData = {
            inflasi: {
                bar: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    values: [2.1, 2.3, 2.0, 2.4, 2.2, 2.5],
                    title: 'Inflasi (IHK 2022=100) bulanan (m-to-m)',
                    type: 'Bar Chart'
                },
                line: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    values: [1.68, 1.87, 5.51, 3.61, 2.45],
                    title: 'Inflasi (IHK 2022=100) tahunan (y-on-y)',
                    type: 'Line Chart'
                }
            },
            ntp: {
                bar: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    values: [105.2, 104.8, 105.5, 105.1, 104.9, 105.3],
                    title: 'Nilai Tukar Petani (NTP) bulanan (2018=100)',
                    type: 'Bar Chart'
                },
                line: {
                    labels: ['It', 'Ib', 'NTP'],
                    values: [105.2, 100.0, 105.2],
                    title: 'Indeks yang Diterima (It) dan Indeks yang Dibayar (Ib) Petani',
                    type: 'Line Chart'
                }
            },
            pengeluaran: {
                pie: {
                    labels: ['Makanan', 'Perumahan', 'Transportasi', 'Lainnya'],
                    values: [45, 25, 20, 10],
                    title: 'Komposisi pengeluaran (makanan vs non-makanan)',
                    type: 'Pie Chart'
                },
                line: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    values: [1.2, 1.3, 1.4, 1.5, 1.6],
                    title: 'Rata-rata pengeluaran per kapita sebulan',
                    type: 'Line Chart'
                }
            },
            kemiskinan: {
                line: {
                    labels: ['Maret 2020', 'Sept 2020', 'Maret 2021', 'Sept 2021', 'Maret 2022', 'Sept 2022'],
                    values: [20.5, 19.8, 19.2, 18.9, 18.5, 18.1],
                    title: 'Persentase penduduk miskin (Maret, September)',
                    type: 'Line Chart'
                },
                bar: {
                    labels: ['Kupang', 'Ende', 'Sikka', 'Manggarai', 'Sumba Timur'],
                    values: [15.2, 22.1, 18.5, 20.3, 25.8],
                    title: 'Perbandingan tingkat kemiskinan antar kabupaten/kota',
                    type: 'Bar Chart'
                }
            },
            ipm: {
                line: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    values: [65.2, 65.8, 66.4, 67.1, 67.8],
                    title: 'Angka IPM (tahunan)',
                    type: 'Line Chart'
                },
                bar: {
                    labels: ['Kupang', 'Ende', 'Sikka', 'Manggarai', 'Sumba Timur'],
                    values: [72.5, 68.2, 70.1, 69.8, 65.3],
                    title: 'Perbandingan IPM antar kabupaten/kota',
                    type: 'Bar Chart'
                }
            },
            ketenagakerjaan: {
                line: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    values: [4.2, 4.8, 5.1, 4.9, 4.5],
                    title: 'Tingkat Pengangguran Terbuka (TPT) tahunan',
                    type: 'Line Chart'
                },
                bar: {
                    labels: ['Pertanian', 'Industri', 'Jasa', 'Konstruksi', 'Lainnya'],
                    values: [35, 15, 25, 10, 15],
                    title: 'Komposisi tenaga kerja menurut sektor',
                    type: 'Bar Chart'
                }
            }
        };

        let currentChart = 'bar';
        const tooltip = document.getElementById('tooltip');

        // Chart controls functionality
        document.querySelectorAll('.chart-dot').forEach(dot => {
            dot.addEventListener('click', function() {
                // Remove active class from all dots
                document.querySelectorAll('.chart-dot').forEach(d => d.classList.remove('active'));
                
                // Add active class to clicked dot
                this.classList.add('active');
                
                // Update chart
                const chartType = this.dataset.chart;
                currentChart = chartType;
                updateChart(chartType);
            });
        });

        function updateChart(type) {
            const selectedVisualization = localStorage.getItem('selectedVisualization') || 'inflasi';
            const visualizationData = chartData[selectedVisualization];
            const data = visualizationData[type];
            
            if (!data) {
                console.error('No data found for visualization:', selectedVisualization, 'type:', type);
                return;
            }
            
            const chartWrapper = document.getElementById('chartWrapper');
            const chartPlaceholder = document.getElementById('chartPlaceholder');
            const chartTitle = document.querySelector('.chart-title');
            
            // Update title
            chartTitle.textContent = data.title;
            
            // Clear previous chart
            chartWrapper.innerHTML = '';
            
            // Create new chart placeholder
            const newPlaceholder = document.createElement('div');
            newPlaceholder.className = 'chart-placeholder';
            newPlaceholder.textContent = data.type;
            newPlaceholder.id = 'chartPlaceholder';
            
            // Create tooltip
            const newTooltip = document.createElement('div');
            newTooltip.className = 'tooltip';
            newTooltip.id = 'tooltip';
            
            chartWrapper.appendChild(newPlaceholder);
            chartWrapper.appendChild(newTooltip);
            
            // Add interactive elements based on chart type
            if (type === 'bar') {
                createBarChart(data);
            } else if (type === 'line') {
                createLineChart(data);
            } else if (type === 'pie') {
                createPieChart(data);
            }
        }

        function createBarChart(data) {
            const chartWrapper = document.getElementById('chartWrapper');
            const chartPlaceholder = document.getElementById('chartPlaceholder');
            
            // Create simple bar chart visualization
            chartPlaceholder.innerHTML = `
                <div style="display: flex; align-items: end; justify-content: space-around; height: 100%; width: 100%; padding: 20px;">
                    ${data.values.map((value, index) => `
                        <div style="display: flex; flex-direction: column; align-items: center; cursor: pointer;" 
                             onmouseover="showTooltip(event, '${data.labels[index]}', ${value})" 
                             onmouseout="hideTooltip()">
                            <div style="background: #003D7A; width: 40px; height: ${(value / Math.max(...data.values)) * 200}px; margin-bottom: 10px; border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 12px; color: #666;">${data.labels[index]}</span>
                            <span style="font-size: 10px; color: #999;">${value}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function createLineChart(data) {
            const chartWrapper = document.getElementById('chartWrapper');
            const chartPlaceholder = document.getElementById('chartPlaceholder');
            
            chartPlaceholder.innerHTML = `
                <div style="position: relative; height: 100%; width: 100%; padding: 20px;">
                    <svg width="100%" height="100%" style="position: absolute; top: 0; left: 0;">
                        <polyline 
                            points="${data.values.map((value, index) => 
                                `${50 + (index * (300 / (data.values.length - 1)))},${200 - (value / Math.max(...data.values)) * 150}`
                            ).join(' ')}"
                            fill="none" 
                            stroke="#003D7A" 
                            stroke-width="3"
                        />
                        ${data.values.map((value, index) => `
                            <circle 
                                cx="${50 + (index * (300 / (data.values.length - 1)))}" 
                                cy="${200 - (value / Math.max(...data.values)) * 150}" 
                                r="6" 
                                fill="#003D7A" 
                                cursor="pointer"
                                onmouseover="showTooltip(event, '${data.labels[index]}', ${value})" 
                                onmouseout="hideTooltip()"
                            />
                        `).join('')}
                    </svg>
                </div>
            `;
        }

        function createPieChart(data) {
            const chartWrapper = document.getElementById('chartWrapper');
            const chartPlaceholder = document.getElementById('chartPlaceholder');
            
            chartPlaceholder.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; height: 100%; width: 100%;">
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: center;">
                        ${data.values.map((value, index) => `
                            <div style="display: flex; align-items: center; gap: 10px; cursor: pointer;" 
                                 onmouseover="showTooltip(event, '${data.labels[index]}', ${value}%)" 
                                 onmouseout="hideTooltip()">
                                <div style="width: 20px; height: 20px; background: ${getColor(index)}; border-radius: 50%;"></div>
                                <span style="font-size: 14px;">${data.labels[index]}: ${value}%</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function getColor(index) {
            const colors = ['#003D7A', '#4CAF50', '#FF9800', '#9C27B0', '#2196F3'];
            return colors[index % colors.length];
        }

        function showTooltip(event, label, value) {
            const tooltip = document.getElementById('tooltip');
            tooltip.innerHTML = `<strong>${label}</strong><br/>Nilai: ${value}`;
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 10 + 'px';
            tooltip.classList.add('show');
        }

        function hideTooltip() {
            const tooltip = document.getElementById('tooltip');
            tooltip.classList.remove('show');
        }

        // Filter functionality
        function applyFilters() {
            const selectedYears = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => cb.value.match(/^\d{4}$/))
                .map(cb => cb.value);
            
            const selectedRegions = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => !cb.value.match(/^\d{4}$/))
                .map(cb => cb.value);
            
            console.log('Selected Years:', selectedYears);
            console.log('Selected Regions:', selectedRegions);
            
            // Here you would typically make an API call to get filtered data
            // For now, we'll just update the chart with current data
            updateChart(currentChart);
        }

        // Add event listeners to checkboxes
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', applyFilters);
        });

        // Download functionality
        function downloadData() {
            const selectedYears = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => cb.value.match(/^\d{4}$/))
                .map(cb => cb.value);
            
            const selectedRegions = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                .filter(cb => !cb.value.match(/^\d{4}$/))
                .map(cb => cb.value);
            
            if (selectedYears.length === 0 && selectedRegions.length === 0) {
                alert('Silakan pilih tahun dan/atau wilayah terlebih dahulu!');
                return;
            }
            
            // Simulate download
            alert(`Mengunduh data untuk:\nTahun: ${selectedYears.join(', ') || 'Semua'}\nWilayah: ${selectedRegions.length} wilayah terpilih\n\nFormat: Excel (.xlsx)`);
        }

        // Initialize chart
        document.addEventListener('DOMContentLoaded', function() {
            const selectedVisualization = localStorage.getItem('selectedVisualization') || 'inflasi';
            const visualizationData = chartData[selectedVisualization];
            
            // Determine default chart type based on available data
            let defaultType = 'bar';
            if (visualizationData.pie) {
                defaultType = 'pie';
            } else if (visualizationData.line) {
                defaultType = 'line';
            }
            
            // Update chart controls to show available types
            updateChartControls(visualizationData);
            
            // Set initial chart
            currentChart = defaultType;
            updateChart(defaultType);
        });

        function updateChartControls(visualizationData) {
            const chartControls = document.querySelector('.chart-controls');
            chartControls.innerHTML = '';
            
            // Add dots for available chart types
            Object.keys(visualizationData).forEach(type => {
                const dot = document.createElement('span');
                dot.className = 'chart-dot';
                dot.dataset.chart = type;
                dot.addEventListener('click', function() {
                    document.querySelectorAll('.chart-dot').forEach(d => d.classList.remove('active'));
                    this.classList.add('active');
                    currentChart = type;
                    updateChart(type);
                });
                chartControls.appendChild(dot);
            });
            
            // Set first dot as active
            if (chartControls.firstChild) {
                chartControls.firstChild.classList.add('active');
            }
        }
    </script>
</body>
</html>
